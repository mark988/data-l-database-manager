# DATA-L数据库管理软件

## 📋 实现状态

✅ **已完成功能**：

### 1️⃣ 数据模型与可视化（ER 图/关系图）
- ✅ 自动生成模型：从当前连接的数据库自动读取表、字段、外键关系生成 ER 图
- ✅ 可视化编辑：支持拖拽表的位置、调整布局（自动/手动）
- ✅ 导出分享：支持导出 ER 图为 PNG、SVG、PDF；支持导出模型定义为 JSON
- ✅ UI界面：独立"ER模型"工作区，左侧表列表，右侧画布显示关系图，工具栏有自动布局、缩放、导出按钮

### 2️⃣ 跨数据库数据迁移/同步
- ✅ 支持的数据源：MySQL、PostgreSQL、SQL Server
- ✅ 数据迁移：支持全库/部分表迁移，自动字段类型映射，批处理配置
- ✅ 实时进度：迁移过程实时显示进度、日志记录
- ✅ 配置选项：批次大小、跳过现有数据、数据校验、创建索引等选项
- ✅ UI界面：独立"数据迁移"工作区，左边任务列表，右边详情和日志

### 3️⃣ SQL 模板和自动化脚本
- ✅ 系统内置模板：分页查询、批量更新、备份脚本等常用模板
- ✅ 用户自定义模板：支持新增/修改/删除模板，模板变量支持（{{variable}}）
- ✅ 脚本自动化：支持创建定时脚本任务（cron表达式），任务状态管理
- ✅ 版本管理：记录模板历史，按数据库类型和分类组织
- ✅ UI界面：独立"SQL模板"工作区，分为模板管理和定时任务两个标签

### 4️⃣ 性能监控与慢查询分析
- ✅ 实时监控：显示CPU、内存、连接数、活跃查询、锁等待等实时指标
- ✅ 慢查询收集：自动收集慢查询，支持阈值设置，显示执行计划
- ✅ 优化建议：根据慢查询分析并提供索引优化建议，支持一键应用
- ✅ 历史趋势：显示过去时间段的性能趋势图表
- ✅ 报告导出：支持导出性能监控数据为JSON报告
- ✅ UI界面：独立"性能监控"工作区，实时监控/慢查询分析/历史趋势三个标签

### 🔄 原有功能（已保留）
- ✅ 多数据库连接管理：支持MySQL、PostgreSQL、SQL Server等
- ✅ SQL编辑器：多标签页、语法高亮、智能补全
- ✅ 数据浏览与编辑：表格视图、分页加载、单元格编辑
- ✅ 数据库对象管理：表结构设计器、右键菜单操作
- ✅ 备份与恢复：支持SQL文件导入导出
- ✅ 书签管理：保存和管理常用SQL查询
- ✅ 用户界面：暗色/浅色主题，全局搜索

## 🚀 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

### 3. 构建生产版本
```bash
npm run build
```

## 🎯 使用指南

### 模块导航
应用顶部有模块导航栏，包含5个主要功能模块：
- **SQL编辑器**：传统的数据库查询和管理界面
- **ER模型**：数据库结构可视化和模型管理
- **数据迁移**：跨数据库数据迁移和同步
- **SQL模板**：SQL模板管理和定时任务自动化
- **性能监控**：数据库性能监控和慢查询分析

### ER模型模块
1. 选择数据库连接
2. 点击"从数据库生成"自动创建ER图
3. 拖拽调整表的位置
4. 使用工具栏的自动布局功能
5. 导出图表为PNG、SVG或PDF格式

### 数据迁移模块
1. 点击"创建迁移任务"
2. 选择源数据库和目标数据库
3. 选择要迁移的表
4. 配置迁移选项（批次大小、数据校验等）
5. 启动迁移任务并监控进度

### SQL模板模块
1. **模板管理**：创建、编辑SQL模板，支持变量替换
2. **定时任务**：设置定时执行的SQL脚本，支持cron表达式

### 性能监控模块
1. **实时监控**：查看当前数据库性能指标
2. **慢查询分析**：分析慢查询并获取优化建议
3. **历史趋势**：查看性能趋势图表和统计数据

## 🛠 技术栈

- **前端框架**：React 18 + TypeScript
- **构建工具**：Vite
- **UI组件**：Tailwind CSS
- **图标库**：Lucide React
- **状态管理**：React Hooks

## 📂 项目结构

```
src/
├── components/           # React组件
│   ├── ERDiagramCanvas.tsx      # ER图画布组件
│   ├── ERModelManager.tsx       # ER模型管理器
│   ├── DatabaseMigration.tsx    # 数据库迁移组件
│   ├── SQLTemplateManager.tsx   # SQL模板管理器
│   ├── PerformanceMonitor.tsx   # 性能监控组件
│   └── ...              # 其他原有组件
├── types/               # TypeScript类型定义
│   └── index.ts         # 扩展的类型定义
├── utils/               # 工具函数
├── App.tsx              # 主应用组件
└── main.tsx             # 应用入口
```

## 🔮 未来规划

- 🔄 增强ER图编辑功能（在线编辑字段、外键关系）
- 🔄 支持更多数据库类型（Oracle、MariaDB、SQLite）
- 🔄 增量同步和双向同步功能
- 🔄 更丰富的性能监控指标和告警机制
- 🔄 模板市场和社区分享功能

## 📝 开发说明

所有新增的功能模块都已集成到主应用中，通过顶部导航栏可以在不同模块间切换。每个模块都是独立的组件，具有完整的用户界面和交互逻辑。

应用支持响应式设计，在不同屏幕尺寸下都能良好显示。所有组件都支持暗色/浅色主题切换。
